<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - City Resident Profiling System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=alternate_email" />
    <link rel="stylesheet" href="assets/css/login.css" />
    <style>
        .loader {
            display: none;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #333;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 10px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg);}
            100% { transform: rotate(360deg);}
        }
        .processing {
            opacity: 0.6;
            pointer-events: none;
        }
    </style>
</head>

<body>
    <div class="login-container">
        <div class="login-image">
            <img src="assets/img/bg.png" alt="Login Background" />
        </div>
        <div class="login-form">
            <div class="logo-container">
                <img src="assets/images/logo.png" alt="Logo" />
                <h1>City Resident Profiling System</h1>
            </div>
            <form class="form" action="index.html" id="loginForm">
                <span id="login-error" class="error-msg"></span>
                <span id="user-error" class="error-msg"></span>
                <div class="input-container">
                    <input id="login-user" placeholder="Enter email" type="email" />
                    <span>
                        <i class="material-symbols-outlined">alternate_email</i>
                    </span>
                </div>
                <span id="pass-error" class="error-msg"></span>
                <div class="input-container">
                    <input id="login-pass" placeholder="Enter password" type="password" />
                    <span class="toggle-password" onclick="togglePassword()">
                        <i id="eye-icon" class="fa fa-eye"></i>
                    </span>
                </div>
                <p class="forgot-password">
                    <a href="forgot-password-email.html">Forgot Password?</a>
                </p>
                <div class="loader" id="loader"></div>
                <input class="submit" type="submit" value="Submit" />

                <p class="signup-link">No account? <a href="registration.html">Register</a></p>
            </form>
        </div>
    </div>
    <script src="assets/js/login.js"></script>
    <script>
        const loginForm = document.getElementById('loginForm');
        const loader = document.getElementById('loader');
        const submitBtn = document.querySelector('.submit');
        const emailInput = document.getElementById('login-user');
        const passInput = document.getElementById('login-pass');
        const loginError = document.getElementById('login-error');

        loginForm.addEventListener('submit', function(e) {
            // Check if any required input is empty
            if (!emailInput.value.trim() || !passInput.value.trim()) {
                // Prevent form submission and do not show loader
                e.preventDefault();
                loginError.textContent = "Please fill in all fields.";
                return;
            }
            loader.style.display = 'block';
            submitBtn.disabled = true;
            submitBtn.classList.add('processing');
        });

        // Auto-remove error message when both fields are filled
        function checkInputs() {
            if (emailInput.value.trim() && passInput.value.trim()) {
                loginError.textContent = "";
            }
        }

        emailInput.addEventListener('input', checkInputs);
        passInput.addEventListener('input', checkInputs);
    </script>
</body>

</html>